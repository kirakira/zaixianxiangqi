function parseMoves(m){m=m.split("/");for(var h=[],d=1;d<m.length;++d){var q=m[d];if("R"==q||"B"==q||"D"==q)break;h.push([parseInt(q[0],10),parseInt(q[1],10),parseInt(q[2],10),parseInt(q[3],10)])}return h}function removeAllChildren(m){for(m=document.getElementById(m);m.lastChild;)m.removeChild(m.lastChild)}function createLink(m,h,d,q,u){var n=document.createElement("a");m&&(n.id=m);h&&(n.className=h);n.href=d;q&&(n.onclick=q);n.appendChild(document.createTextNode(u));return n}
String.prototype.endsWith||(String.prototype.endsWith=function(m,h){var d=this.toString();if(void 0===h||h>d.length)h=d.length;h-=m.length;d=d.indexOf(m,h);return-1!==d&&d===h});var PIECE_NONE=0,PIECE_K=1,PIECE_A=2,PIECE_E=3,PIECE_H=4,PIECE_R=5,PIECE_C=6,PIECE_P=7,PIECE_BK=1,PIECE_BA=2,PIECE_BE=3,PIECE_BH=4,PIECE_BR=5,PIECE_BC=6,PIECE_BP=7,PIECE_RK=9,PIECE_RA=10,PIECE_RE=11,PIECE_RH=12,PIECE_RR=13,PIECE_RC=14,PIECE_RP=15;function isRedPiece(m){return 8<=m}function Move(m,h,d,q,u,n){this.i1=m;this.j1=h;this.i2=d;this.j2=q;this.piece=u||PIECE_NONE;this.capture=n||PIECE_NONE}
function Chess(){function m(){return 0==y.length%2}function h(b){return 8<=b?b-8:b}function d(){t=[];y=[];for(var b=0;10>b;++b)for(t.push([]),j=0;9>j;++j)t[b].push(0);b="rheakaehr 9 1c5c1 p1p1p1p1p 9 9 P1P1P1P1P 1C5C1 9 RHEAKAEHR".split(" ");if(10!=b.length)throw"Malformed fen string: rheakaehr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RHEAKAEHR";for(i=0;10>i;++i){var e=0;for(k=0;k<b[i].length;++k){if(9<=e)throw"Malformed fen string at row "+i+": rheakaehr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RHEAKAEHR";
var g=b[i][k];if("0"<=g&&"9">=g)e+=parseInt(b[i][k],10);else{var g=t[i],v=e,l=b[i][k],a=l==l.toLowerCase(),l=l.toLowerCase(),c=0;"k"==l?c=1:"a"==l?c=2:"e"==l?c=3:"h"==l?c=4:"r"==l?c=5:"c"==l?c=6:"p"==l&&(c=7);a||(c+=8);g[v]=c;++e}}}}function q(b,e,g,l){y.push(new Move(b,e,g,l,t[b][e],t[g][l]));t[g][l]=t[b][e];t[b][e]=0;return y[y.length-1]}function u(){var b=y.pop();t[b.i1][b.j1]=t[b.i2][b.j2];t[b.i2][b.j2]=b.capture}function n(b,e){return 0<=b&&10>b&&0<=e&&9>e}function p(b,e){return 3<=e&&5>=e&&
(0<=b&&2>=b||7<=b&&9>=b)}function a(b,e){var g=[];for(r=0;4>r;++r)p(b+z[r],e+l[r])&&g.push(new Move(b,e,b+z[r],e+l[r]));for(delta=-1;1>=delta;delta+=2)for(ii=b+delta;0<=ii&&10>ii&&(h(t[ii][e])==PIECE_K&&g.push(new Move(b,e,ii,e)),0==t[ii][e]);ii+=delta);return g}function C(b,e){var g=[];for(r=0;4>r;++r)p(b+x[r],e+f[r])&&g.push(new Move(b,e,b+x[r],e+f[r]));return g}function E(b,e){var g=[];for(r=0;4>r;++r)n(b+2*x[r],e+2*f[r])&&0==t[b+x[r]][e+f[r]]&&4<b+x[r]&&g.push(new Move(b,e,b+2*x[r],e+2*f[r]));
return g}function A(b,e){var g=[];for(r=0;4>r;++r)!n(b+2*x[r],e+2*f[r])||0!=t[b+x[r]][e+f[r]]||4<b+x[r]||g.push(new Move(b,e,b+2*x[r],e+2*f[r]));return g}function w(b,e){var g=[];[[1,2,0,1],[1,-2,0,-1],[-1,2,0,1],[-1,-2,0,-1],[2,1,1,0],[2,-1,1,0],[-2,1,-1,0],[-2,-1,-1,0]].forEach(function(l){n(b+l[0],e+l[1])&&0==t[b+l[2]][e+l[3]]&&g.push(new Move(b,e,b+l[0],e+l[1]))});return g}function c(b,e){var g=[];for(r=0;4>r;++r){var v,a;v=b+z[r];for(a=e+l[r];n(v,a)&&(g.push(new Move(b,e,v,a)),0==t[v][a]);v+=
z[r],a+=l[r]);}return g}function B(b,e){var g=[];for(r=0;4>r;++r){var a,c,f=!1;a=b+z[r];for(c=e+l[r];n(a,c);a+=z[r],c+=l[r])if(!f&&0==t[a][c])g.push(new Move(b,e,a,c));else if(!f&&0!=t[a][c])f=!0;else if(f&&0!=t[a][c]){g.push(new Move(b,e,a,c));break}}return g}function H(b,e){var g=[];4<b?g.push(new Move(b,e,b-1,e)):(n(b-1,e)&&g.push(new Move(b,e,b-1,e)),n(b,e-1)&&g.push(new Move(b,e,b,e-1)),n(b,e+1)&&g.push(new Move(b,e,b,e+1)));return g}function G(b,e){var g=[];4<b?(n(b+1,e)&&g.push(new Move(b,
e,b+1,e)),n(b,e-1)&&g.push(new Move(b,e,b,e-1)),n(b,e+1)&&g.push(new Move(b,e,b,e+1))):g.push(new Move(b,e,b+1,e));return g}function D(b,e,g){var l=h(t[b][e]),f=isRedPiece(t[b][e]),x=[];1==l?x=a(b,e):2==l?x=C(b,e):3==l?x=f?E(b,e):A(b,e):4==l?x=w(b,e):5==l?x=c(b,e):6==l?x=B(b,e):7==l&&(x=f?H(b,e):G(b,e));x.forEach(function(e){0!=t[e.i2][e.j2]&&isRedPiece(t[e.i2][e.j2])==f||g.push(e)})}function F(b){var e=[];for(i=0;10>i;++i)for(j=0;9>j;++j)0!=t[i][j]&&isRedPiece(t[i][j])==b&&D(i,j,e);return e}this.reset=
d;this.setMoves=function(b){var e=y;d();for(var g=!0,l=0,a=0;a<b.length;++a)q(b[a][0],b[a][1],b[a][2],b[a][3]),g&&e.length>a&&e[a].i1==b[a][0]&&e[a].j1==b[a][1]&&e[a].i2==b[a][2]&&e[a].j2==b[a][3]?++l:g=!1;return l};this.move=q;this.checkMove=function(b,e,g,l){var a=m();if(!F(a).find(function(a,c,f){return a.i1==b&&a.j1==e&&a.i2==g&&a.j2==l}))return!1;if(t[g][l]==(a?PIECE_BK:PIECE_RK))return!0;var c=!1;q(b,e,g,l);F(!a).find(function(e,b,g){return t[e.i2][e.j2]==(a?PIECE_RK:PIECE_BK)})&&(c=!0);u();
return!c};this.moveHistory=function(){for(var b=[],e=0;e<y.length;++e)b.push(y[e]);return b};this.lastMove=function(){return y[y.length-1]};this.pieceAt=function(b,e){return t[b][e]};this.isRedNext=m;this.numMoves=function(){return y.length};var t=[],y=[];d();var z=[0,1,0,-1],l=[1,0,-1,0],x=[1,1,-1,-1],f=[1,-1,-1,1]};function BoardUI(m){function h(){return document.getElementById("board")}function d(l,a){z&&(a=8-a);return t/2+a*t}function q(a,c){z&&(a=9-a);return 5>c?t/2+a*t:t/2+a*t+y}function u(a,c,f,b,e,g){var v=document.createElementNS(D,"line");v.setAttribute("x1",a);v.setAttribute("y1",c);v.setAttribute("x2",f);v.setAttribute("y2",b);v.classList.add(e);g&&(v.id=g);return v}function n(a,c,f,b,e){var g=d(a,c);c=q(a,c);var v=document.createElementNS(D,"circle");v.setAttribute("cx",g);v.setAttribute("cy",c);
v.setAttribute("r",f);v.classList.add(b[a]);v.classList.add("piece-element");e&&(v.id=e);return v}function p(a,c){return"abcdefghi"[c]+(9-a).toString()}function a(a,c,f,b,e){e&&A(c,f);var g=void 0;e&&(g="piece-outer-"+p(c,f));var g=n(c,f,23,"piece-outer",g),v=void 0;e&&(v="piece-inner-"+p(c,f));var v=n(c,f,20,"piece-inner",v),h=F[b],B=void 0;e&&(B="piece-text-"+p(c,f));e=B;B=d(c,f);c=q(c,f);f=document.createElementNS(D,"text");f.style.fontFamily="Roboto,monospace";f.style.fontSize="24px";f.setAttribute("text-anchor",
"middle");f.setAttribute("alignment-baseline","central");f.setAttribute("dominant-baseline","middle");f.setAttribute("x",B);f.setAttribute("y",c);f.appendChild(document.createTextNode(h));f.classList.add("piece-text");f.classList.add("piece-element");f.userSelect="none";e&&(f.id=e);isRedPiece(b)?(g.setAttribute("stroke","red"),v.style.stroke="red",f.style.fill="red"):(g.style.stroke="black",v.style.stroke="black",f.style.fill="black");g.style.strokeWidth=2;v.style.strokeWidth=2;g.style.fill="white";
v.style.fillOpacity=0;a.appendChild(g);a.appendChild(v);a.appendChild(f)}function C(a,c){return function(){m(a,c)}}function E(a,c){var f=n(a,c,23,"piece-cover","piece-cover-"+p(a,c));f.style.strokeWidth=0;f.style.fillOpacity=0;f.userSelect="none";f.onmousedown=C(a,c);f.touchend=f.onmousedown;w(f)}function A(a,d){var f="piece-cover-"+p(a,d);null!=document.getElementById(f)&&c(f)}function w(a){h().appendChild(a)}function c(a){h().removeChild(document.getElementById(a))}function B(a,c,f,b){var e;e=d(a,
c);a=q(a,c);c=d(f,b);f=q(f,b);e=u(e,a,c,f,"grid",void 0);e.style.strokeWidth=1;e.style.stroke="gray";w(e)}function H(){for(i=0;9>i;++i)B(0,i,4,i),0!=i&&8!=i||B(4,i,5,i),B(5,i,9,i);for(i=0;10>i;++i)B(i,0,i,8);B(0,3,2,5);B(0,5,2,3);B(7,3,9,5);B(9,3,7,5);for(i=0;10>i;++i)for(j=0;9>j;++j)E(i,j)}function G(){for(var a=h().getElementsByClassName("highlighter");0<a.length;)h().removeChild(a[0])}this.reset=function(a){if(z==a){for(a=h().getElementsByClassName("piece-element");0<a.length;)h().removeChild(a[0]);
G()}else z=a,removeAllChildren("board"),H()};this.drawPieceWithCover=function(c,d,f){a(h(),c,d,f,!0);E(c,d)};this.erasePiece=function(a,d){A(a,d);c("piece-text-"+p(a,d));c("piece-inner-"+p(a,d));c("piece-outer-"+p(a,d));E(a,d)};this.drawColorIndicator=function(c,d){var f=1;d&&(f+=8);a(c,0,0,f,!1)};this.highlightSquare=function(a,c){var f=d(a,c),b=q(a,c),e=t/6;for(a=-1;1>=a;a+=2){var g=u(f-23,b+23*a,f-23+e,b+23*a,"highlighter",void 0);g.style.strokeWidth=2;g.style.stroke="blue";w(g);g=u(f+23-e,b+23*
a,f+23,b+23*a,"highlighter",void 0);g.style.strokeWidth=2;g.style.stroke="blue";w(g)}for(a=-1;1>=a;a+=2)g=u(f+23*a,b-23,f+23*a,b-23+e,"highlighter",void 0),g.style.strokeWidth=2,g.style.stroke="blue",w(g),g=u(f+23*a,b+23-e,f+23*a,b+23,"highlighter",void 0),g.style.strokeWidth=2,g.style.stroke="blue",w(g)};this.eraseHighlights=G;var D="http://www.w3.org/2000/svg",F=" \u5c07 \u58eb \u8c61 \u99ac \u8eca \u7832 \u5352  \u5e25 \u4ed5 \u76f8 \u508c \u4fe5 \u70ae \u5175".split(" "),t=50,y=0,z=!1;H()};function Board(m){function h(){for(var c=0;10>c;++c)for(var d=0;9>d;++d)p.pieceAt(c,d)!=PIECE_NONE&&a.drawPieceWithCover(c,d,p.pieceAt(c,d));w=p.numMoves()}function d(a){a=Math.max(0,a);a=Math.min(p.numMoves(),a);if(a!=w){var d=p.moveHistory();if(a>w)for(var h=w;h<a;++h)u(d[h]);else for(h=w-1;h>=a;--h)0<h?n(d[h],d[h-1]):n(d[h],null);w=a}}function q(a){return a==PIECE_NONE?!1:"r"==C?isRedPiece(a):"b"==C?!isRedPiece(a):!1}function u(c){a.erasePiece(c.i1,c.j1);c.capture&&a.erasePiece(c.i2,c.j2);a.drawPieceWithCover(c.i2,
c.j2,c.piece);a.eraseHighlights();a.highlightSquare(c.i1,c.j1);a.highlightSquare(c.i2,c.j2);A=null}function n(c,d){a.drawPieceWithCover(c.i1,c.j1,c.piece);a.erasePiece(c.i2,c.j2);c.capture&&a.drawPieceWithCover(c.i2,c.j2,c.capture);a.eraseHighlights();d&&(a.highlightSquare(d.i1,d.j1),a.highlightSquare(d.i2,d.j2));A=null}this.setState=function(c,m,q){c!=C&&(C=c,a.reset("b"==c),p.reset(),h(),A=null);E=m;c=p.moveHistory();q=p.setMoves(q);m=w;w==c.length&&(m=p.numMoves());for(m=Math.min(m,p.numMoves());w>
q;--w){var u=w-1;0<u?n(c[u],c[u-1]):n(c[u],null)}d(m)};this.resetState=function(c,d,m){C=c;a.reset("b"==c);p.reset();p.setMoves(m);h();A=null;w=p.numMoves();0<p.numMoves()&&(c=p.lastMove(),a.highlightSquare(c.i1,c.j1),a.highlightSquare(c.i2,c.j2))};this.showMove=d;this.isRedNext=function(){return p.isRedNext()};this.numMoves=function(){return p.numMoves()};this.numMovesShown=function(){return w};var p=new Chess,a=new BoardUI(function(c,d){if(!E){var h=p.isRedNext();if(("r"==C&&h||"b"==C&&!h)&&w==
p.numMoves())if(A)if(p.checkMove(A[0],A[1],c,d)){var h=A[0],n=A[1];u(p.move(h,n,c,d));++w;m(h,n,c,d)}else q(p.pieceAt(c,d))&&(a.eraseHighlights(),A=[c,d],a.highlightSquare(c,d));else q(p.pieceAt(c,d))&&(a.eraseHighlights(),A=[c,d],a.highlightSquare(c,d))}}),C="r",E=!0,A=null,w=0;a.drawColorIndicator(document.getElementById("redIndicator"),!0);a.drawColorIndicator(document.getElementById("blackIndicator"),!1);h()};function Stopwatch(m){function h(){return document.getElementById(m)}function d(){if(n){var a=document.getElementById(m+"Hand"),d=.8*u,h=p/q*2*Math.PI;a.setAttribute("x2",d*Math.sin(h));a.setAttribute("y2",-d*Math.cos(h));++p;p%=q}}this.start=function(){n||(n=!0,p=0,d(),h().style.visibility="visible")};this.stop=function(){n=!1;h().style.visibility="hidden"};this.tick=d;this.frequency=function(){return q};var q=60,u=20,n=!1,p=0;(function(){var a=document.createElementNS("http://www.w3.org/2000/svg",
"circle");a.setAttribute("cx",0);a.setAttribute("cy",0);a.setAttribute("r",u);a.style.stroke="black";a.style.strokeWidth=2;a.style.fillOpacity=0;h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",0);a.setAttribute("y1",-u);a.setAttribute("x2",0);a.setAttribute("y2",-u-6);a.style.strokeWidth=4;a.style.stroke="black";h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x",-3);a.setAttribute("y",-u-6-4);
a.setAttribute("width",6);a.setAttribute("height",4);a.style.strokeWidth=.5;a.style.stroke="black";a.style.fillOpacity=0;h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",0);a.setAttribute("cy",-u-6-2);a.setAttribute("r",6);a.style.stroke="black";a.style.strokeWidth=1;a.style.fillOpacity=0;h().appendChild(a);for(a=-3;3>=a;a+=1){var d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",a);d.setAttribute("y1",-u-6-
4);d.setAttribute("x2",a);d.setAttribute("y2",-u-6);d.style.strokeWidth=.2;d.style.stroke="black";h().appendChild(d)}for(a=0;12>a;++a){var d=document.createElementNS("http://www.w3.org/2000/svg","line"),n=a/12*2*Math.PI,p=u,q=.7*u;d.setAttribute("x1",p*Math.sin(n));d.setAttribute("y1",-p*Math.cos(n));d.setAttribute("x2",q*Math.sin(n));d.setAttribute("y2",-q*Math.cos(n));d.style.strokeWidth=1;d.style.stroke="black";h().appendChild(d)}for(a=0;60>a;++a)d=document.createElementNS("http://www.w3.org/2000/svg",
"line"),n=a/60*2*Math.PI,p=u,q=.85*u,d.setAttribute("x1",p*Math.sin(n)),d.setAttribute("y1",-p*Math.cos(n)),d.setAttribute("x2",q*Math.sin(n)),d.setAttribute("y2",-q*Math.cos(n)),d.style.strokeWidth=.5,d.style.stroke="black",h().appendChild(d);a=document.createElementNS("http://www.w3.org/2000/svg","line");a.id=m+"Hand";a.setAttribute("x1",0);a.setAttribute("y1",0);a.setAttribute("x2",0);a.setAttribute("y2",.8*-u);a.style.strokeWidth=1.5;a.style.stroke="black";h().appendChild(a);h().style.visibility=
"hidden"})()};function Game(m,h,d){function q(a,g,c,d,h,l,n){var m=new XMLHttpRequest;m.onreadystatechange=function(){if(4==m.readyState){var a=b.indexOf(c);if(-1!=a){b.splice(a,1);for(var e=x+1;e<=f;++e)if(a=b.indexOf(e),-1==a)x=e;else break;requestResolved=!0}else requestResolved=!1;200<=m.status&&299>=m.status?requestResolved||f==c?l(m.responseText):console.log("Dropped response from an old request."):n&&n(m.responseText)}};m.open(a,g,!0);d&&m.setRequestHeader("Content-type",d);h?m.send(h):m.send()}function u(a,
g,c,d){++f;b.push(f);q("POST",a,f,"application/x-www-form-urlencoded; charset=UTF-8",g,c,d)}function n(a){if("fail"==a)alert("Operation failed");else try{var b=JSON.parse(a);b.gameinfo&&("success"!==b.status&&console.log("last update failed"),b=b.gameinfo);d=b;t()}catch(c){console.log("Unrecognized server response: "+a)}}function p(a){a=a.split("/");for(var b=[],c=1;c<a.length;++c){var d=a[c];if("R"==d||"B"==d)break;b.push([parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)])}return b}
function a(a,b,c,f){var l=d;a=[a,b,c,f];l.moves+="/"+(""+a[0]+a[1]+a[2]+a[3]);G();u("/gameinfo","uid="+h+"&sid="+E("sid")+"&gid="+m+"&moves="+d.moves,n,C);F()}function C(a){console.log("Retrieve game info failed")}function E(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;++c){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}function A(a){removeAllChildren("invite-ai-container");var b=createLink("invite-ai-link",null,
"#",function(){w("invite-ai-link");u("/invite_ai","uid="+h+"&sid="+E("sid")+"&gid="+m,n,C);return!1},"invite Blur");document.getElementById("invite-ai-container").appendChild(b);a||w("invite-ai-link")}function w(a){var b=document.getElementById(a);a=b.parentElement;var d=b.innerText,c=b.classList;a.removeChild(b);b=document.createElement("span");b.classList=c;b.classList.add("disabled-link");b.appendChild(document.createTextNode(d));a.appendChild(b)}function c(a){w(a+"-sit-link");u("/gameinfo","uid="+
h+"&sid="+E("sid")+"&gid="+m+"&sit="+a,n,C)}function B(a){var b=document.createElement("sup");b.className="hint-you";a?b.appendChild(document.createTextNode(" ")):b.appendChild(document.createTextNode("you"));return b}function H(){removeAllChildren("red-player");removeAllChildren("black-player");if(void 0!==d.red&&null!==d.red){var a=document.getElementById("red-player"),b=document.createElement("span");b.appendChild(document.createTextNode(d.red.name));a.appendChild(b);a.appendChild(B(d.red.id!=
h))}else b=createLink("red-sit-link","sit-link","#",function(){c("red");return!1},"sit here"),document.getElementById("red-player").appendChild(b);void 0!==d.black&&null!==d.black?(a=document.getElementById("black-player"),b=document.createElement("span"),b.appendChild(document.createTextNode(d.black.name)),a.appendChild(b),a.appendChild(B(d.black.id!=h))):(b=createLink("black-sit-link","sit-link","#",function(){c("black");return!1},"sit here"),document.getElementById("black-player").appendChild(b))}
function G(){var a=document.getElementById("waitingStatus"),b=document.getElementById("playingStatus"),c=document.getElementById("redWonStatus"),f=document.getElementById("blackWonStatus");a.style.display="none";b.style.display="none";c.style.display="none";f.style.display="none";d.moves.endsWith("R")?(c.style.display="inline-block",y.stop(),z.stop()):d.moves.endsWith("B")?(f.style.display="inline-block",y.stop(),z.stop()):d.red&&d.black?(b.style.display="inline-block",l.isRedNext()?(y.start(),z.stop()):
(z.start(),y.stop())):a.style.display="inline-block"}function D(a,b){var c=document.createElement("td");c.appendChild(b);a.appendChild(c)}function F(){removeAllChildren("move-history");var a=document.getElementById("move-history"),b=document.createElement("table");b.id="moveHistoryControls";var c=document.createElement("tr");b.appendChild(c);0<l.numMovesShown()?(D(c,createLink("move-history-first",void 0,"#",function(){l.showMove(0);F();return!1},"first")),D(c,createLink("move-history-prev",void 0,
"#",function(){l.showMove(l.numMovesShown()-1);F();return!1},"prev"))):(D(c,document.createTextNode("first")),D(c,document.createTextNode("prev")));D(c,document.createTextNode(""+l.numMovesShown()+" / "+l.numMoves()));l.numMovesShown()<l.numMoves()?(D(c,createLink("move-history-next",void 0,"#",function(){l.showMove(l.numMovesShown()+1);F();return!1},"next")),D(c,createLink("move-history-last",void 0,"#",function(){l.showMove(l.numMoves());F();return!1},"last"))):(D(c,document.createTextNode("next")),
D(c,document.createTextNode("last")));a.appendChild(b);document.getElementById("forkGame");removeAllChildren("forkGame");forkGame.appendChild(createLink("move-history-fork-link",void 0,"/fork/"+m+"/"+l.numMovesShown().toString(),void 0,"fork at move "+l.numMovesShown()))}function t(){H();var a="r";d.black&&d.black.id==h&&(a="b");var b=d.black&&d.black.id==h||d.red&&d.red.id==h;l.setState(a,!(d.red&&d.black&&!d.moves.endsWith("R")&&!d.moves.endsWith("B"))||!b,p(d.moves));G();F();A(b&&(!d.black||!d.red))}
var y,z,l,x=0,f=0,b=[];(function(){y=new Stopwatch("redStopwatch");z=new Stopwatch("blackStopwatch");window.setInterval(function(){y.tick();z.tick()},6E4/y.frequency());l=new Board(a);t();window.setInterval(function(){q("GET","/gameinfo?gid="+m,x,void 0,void 0,n,C)},1E3)})()}
function toggleMenu(){var m=document.getElementById("menu-text"),h=document.getElementById("menu-content");"grid"==h.style.display?(h.style.display="none",m.innerHTML='menu <span class="menu-toggle">[+]</span>'):(h.style.display="grid",m.innerHTML='menu <span class="menu-toggle">[-]</span>')}document.onreadystatechange=function(){"interactive"==document.readyState&&new Game(currentGameId,myUid,gameInfo)};
