function parseMoves(p){p=p.split("/");for(var h=[],e=1;e<p.length;++e){var t=p[e];if("R"==t||"B"==t||"D"==t)break;h.push([parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)])}return h}function removeAllChildren(p){for(p=document.getElementById(p);p.lastChild;)p.removeChild(p.lastChild)}function createLink(p,h,e,t,u){var n=document.createElement("a");p&&(n.id=p);h&&(n.className=h);n.href=e;t&&(n.onclick=t);n.appendChild(document.createTextNode(u));return n}
String.prototype.endsWith||(String.prototype.endsWith=function(p,h){var e=this.toString();if(void 0===h||h>e.length)h=e.length;h-=p.length;e=e.indexOf(p,h);return-1!==e&&e===h});var PIECE_NONE=0,PIECE_K=1,PIECE_A=2,PIECE_E=3,PIECE_H=4,PIECE_R=5,PIECE_C=6,PIECE_P=7,PIECE_BK=1,PIECE_BA=2,PIECE_BE=3,PIECE_BH=4,PIECE_BR=5,PIECE_BC=6,PIECE_BP=7,PIECE_RK=9,PIECE_RA=10,PIECE_RE=11,PIECE_RH=12,PIECE_RR=13,PIECE_RC=14,PIECE_RP=15;function isRedPiece(p){return 8<=p}function Move(p,h,e,t,u,n){this.i1=p;this.j1=h;this.i2=e;this.j2=t;this.piece=u||PIECE_NONE;this.capture=n||PIECE_NONE}
function Chess(){function p(){return 0==x.length%2}function h(b){return 8<=b?b-8:b}function e(){v=[];x=[];for(var b=0;10>b;++b)for(v.push([]),j=0;9>j;++j)v[b].push(0);b="rheakaehr 9 1c5c1 p1p1p1p1p 9 9 P1P1P1P1P 1C5C1 9 RHEAKAEHR".split(" ");if(10!=b.length)throw"Malformed fen string: rheakaehr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RHEAKAEHR";for(i=0;10>i;++i){var c=0;for(k=0;k<b[i].length;++k){if(9<=c)throw"Malformed fen string at row "+i+": rheakaehr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RHEAKAEHR";
var l=b[i][k];if("0"<=l&&"9">=l)c+=parseInt(b[i][k],10);else{var l=v[i],a=c,m=b[i][k],f=m==m.toLowerCase(),m=m.toLowerCase(),d=0;"k"==m?d=1:"a"==m?d=2:"e"==m?d=3:"h"==m?d=4:"r"==m?d=5:"c"==m?d=6:"p"==m&&(d=7);f||(d+=8);l[a]=d;++c}}}}function t(b,c,l,m){x.push(new Move(b,c,l,m,v[b][c],v[l][m]));v[l][m]=v[b][c];v[b][c]=0;return x[x.length-1]}function u(){var b=x.pop();v[b.i1][b.j1]=v[b.i2][b.j2];v[b.i2][b.j2]=b.capture}function n(b,c){return 0<=b&&10>b&&0<=c&&9>c}function q(b,c){return 3<=c&&5>=c&&
(0<=b&&2>=b||7<=b&&9>=b)}function a(b,c){var l=[];for(r=0;4>r;++r)q(b+m[r],c+f[r])&&l.push(new Move(b,c,b+m[r],c+f[r]));for(delta=-1;1>=delta;delta+=2)for(ii=b+delta;0<=ii&&10>ii&&(h(v[ii][c])==PIECE_K&&l.push(new Move(b,c,ii,c)),0==v[ii][c]);ii+=delta);return l}function B(b,c){var l=[];for(r=0;4>r;++r)q(b+d[r],c+C[r])&&l.push(new Move(b,c,b+d[r],c+C[r]));return l}function E(b,c){var l=[];for(r=0;4>r;++r)n(b+2*d[r],c+2*C[r])&&0==v[b+d[r]][c+C[r]]&&4<b+d[r]&&l.push(new Move(b,c,b+2*d[r],c+2*C[r]));
return l}function z(b,c){var l=[];for(r=0;4>r;++r)!n(b+2*d[r],c+2*C[r])||0!=v[b+d[r]][c+C[r]]||4<b+d[r]||l.push(new Move(b,c,b+2*d[r],c+2*C[r]));return l}function w(b,c){var l=[];[[1,2,0,1],[1,-2,0,-1],[-1,2,0,1],[-1,-2,0,-1],[2,1,1,0],[2,-1,1,0],[-2,1,-1,0],[-2,-1,-1,0]].forEach(function(m){n(b+m[0],c+m[1])&&0==v[b+m[2]][c+m[3]]&&l.push(new Move(b,c,b+m[0],c+m[1]))});return l}function g(b,c){var l=[];for(r=0;4>r;++r){var a,d;a=b+m[r];for(d=c+f[r];n(a,d)&&(l.push(new Move(b,c,a,d)),0==v[a][d]);a+=
m[r],d+=f[r]);}return l}function y(b,c){var l=[];for(r=0;4>r;++r){var a,d,g=!1;a=b+m[r];for(d=c+f[r];n(a,d);a+=m[r],d+=f[r])if(!g&&0==v[a][d])l.push(new Move(b,c,a,d));else if(!g&&0!=v[a][d])g=!0;else if(g&&0!=v[a][d]){l.push(new Move(b,c,a,d));break}}return l}function G(b,c){var l=[];4<b?l.push(new Move(b,c,b-1,c)):(n(b-1,c)&&l.push(new Move(b,c,b-1,c)),n(b,c-1)&&l.push(new Move(b,c,b,c-1)),n(b,c+1)&&l.push(new Move(b,c,b,c+1)));return l}function F(b,c){var l=[];4<b?(n(b+1,c)&&l.push(new Move(b,
c,b+1,c)),n(b,c-1)&&l.push(new Move(b,c,b,c-1)),n(b,c+1)&&l.push(new Move(b,c,b,c+1))):l.push(new Move(b,c,b+1,c));return l}function D(b,c,l){var m=h(v[b][c]),d=isRedPiece(v[b][c]),f=[];1==m?f=a(b,c):2==m?f=B(b,c):3==m?f=d?E(b,c):z(b,c):4==m?f=w(b,c):5==m?f=g(b,c):6==m?f=y(b,c):7==m&&(f=d?G(b,c):F(b,c));f.forEach(function(c){0!=v[c.i2][c.j2]&&isRedPiece(v[c.i2][c.j2])==d||l.push(c)})}function A(b){var c=[];for(i=0;10>i;++i)for(j=0;9>j;++j)0!=v[i][j]&&isRedPiece(v[i][j])==b&&D(i,j,c);return c}this.reset=
e;this.setMoves=function(b){var c=x;e();for(var l=!0,m=0,a=0;a<b.length;++a)t(b[a][0],b[a][1],b[a][2],b[a][3]),l&&c.length>a&&c[a].i1==b[a][0]&&c[a].j1==b[a][1]&&c[a].i2==b[a][2]&&c[a].j2==b[a][3]?++m:l=!1;return m};this.move=t;this.checkMove=function(b,c,l,a){var m=p();if(!A(m).find(function(m,d,f){return m.i1==b&&m.j1==c&&m.i2==l&&m.j2==a}))return!1;if(v[l][a]==(m?PIECE_BK:PIECE_RK))return!0;var d=!1;t(b,c,l,a);A(!m).find(function(c,b,l){return v[c.i2][c.j2]==(m?PIECE_RK:PIECE_BK)})&&(d=!0);u();
return!d};this.moveHistory=function(){for(var b=[],c=0;c<x.length;++c)b.push(x[c]);return b};this.pieceAt=function(b,c){return v[b][c]};this.isRedNext=p;this.numMoves=function(){return x.length};var v=[],x=[];e();var m=[0,1,0,-1],f=[1,0,-1,0],d=[1,1,-1,-1],C=[1,-1,-1,1]};function BoardUI(p){function h(){return document.getElementById("board")}function e(m,a){x&&(a=8-a);return A/2+a*A}function t(a,f){x&&(a=9-a);return 5>f?A/2+a*A:A/2+a*A+v}function u(a,f,d,g,b,c){var l=document.createElementNS(F,"line");l.setAttribute("x1",a);l.setAttribute("y1",f);l.setAttribute("x2",d);l.setAttribute("y2",g);l.setAttribute("class",b);c&&(l.id=c);return l}function n(a,f,d,g,b){var c=e(a,f);a=t(a,f);f=document.createElementNS(F,"circle");f.setAttribute("cx",c);f.setAttribute("cy",
a);f.setAttribute("r",d);f.setAttribute("class",g);b&&(f.id=b);return f}function q(a,f){return"abcdefghi"[f]+(9-a).toString()}function a(a,f,d,g,b){b&&z(f,d);var c=void 0;b&&(c="piece-outer-"+q(f,d));var c=n(f,d,23,"piece-outer",c),l=void 0;b&&(l="piece-inner-"+q(f,d));var l=n(f,d,20,"piece-inner",l),h=D[g],y=void 0;b&&(y="piece-text-"+q(f,d));b=y;y=e(f,d);f=t(f,d);d=document.createElementNS(F,"text");d.style.fontFamily="Roboto,monospace";d.style.fontSize="24px";d.setAttribute("text-anchor","middle");
d.setAttribute("alignment-baseline","central");d.setAttribute("dominant-baseline","middle");d.setAttribute("x",y);d.setAttribute("y",f);d.appendChild(document.createTextNode(h));d.setAttribute("class","piece-text");d.userSelect="none";b&&(d.id=b);isRedPiece(g)?(c.setAttribute("stroke","red"),l.style.stroke="red",d.style.fill="red"):(c.style.stroke="black",l.style.stroke="black",d.style.fill="black");c.style.strokeWidth=2;l.style.strokeWidth=2;c.style.fill="white";l.style.fillOpacity=0;a.appendChild(c);
a.appendChild(l);a.appendChild(d)}function B(a,f){return function(){p(a,f)}}function E(a,f){var d=n(a,f,23,"piece-cover","piece-cover-"+q(a,f));d.style.strokeWidth=0;d.style.fillOpacity=0;d.userSelect="none";d.onmousedown=B(a,f);d.touchend=d.onmousedown;w(d)}function z(a,f){var d="piece-cover-"+q(a,f);null!=document.getElementById(d)&&g(d)}function w(a){h().appendChild(a)}function g(a){h().removeChild(document.getElementById(a))}function y(a,f,d,g){var b;b=e(a,f);a=t(a,f);f=e(d,g);d=t(d,g);b=u(b,
a,f,d,"grid",void 0);b.style.strokeWidth=1;b.style.stroke="gray";w(b)}function G(a){x=a;removeAllChildren("board");for(i=0;9>i;++i)y(0,i,4,i),0!=i&&8!=i||y(4,i,5,i),y(5,i,9,i);for(i=0;10>i;++i)y(i,0,i,8);y(0,3,2,5);y(0,5,2,3);y(7,3,9,5);y(9,3,7,5);for(i=0;10>i;++i)for(j=0;9>j;++j)E(i,j)}this.reset=G;this.drawPieceWithCover=function(m,f,d){a(h(),m,f,d,!0);E(m,f)};this.erasePiece=function(a,f){z(a,f);g("piece-text-"+q(a,f));g("piece-inner-"+q(a,f));g("piece-outer-"+q(a,f));E(a,f)};this.drawColorIndicator=
function(g,f){var d=1;f&&(d+=8);a(g,0,0,d,!1)};this.highlightSquare=function(a,f){var d=e(a,f),g=t(a,f),b=A/6;for(a=-1;1>=a;a+=2){var c=u(d-23,g+23*a,d-23+b,g+23*a,"highlighter",void 0);c.style.strokeWidth=2;c.style.stroke="blue";w(c);c=u(d+23-b,g+23*a,d+23,g+23*a,"highlighter",void 0);c.style.strokeWidth=2;c.style.stroke="blue";w(c)}for(a=-1;1>=a;a+=2)c=u(d+23*a,g-23,d+23*a,g-23+b,"highlighter",void 0),c.style.strokeWidth=2,c.style.stroke="blue",w(c),c=u(d+23*a,g+23-b,d+23*a,g+23,"highlighter",void 0),
c.style.strokeWidth=2,c.style.stroke="blue",w(c)};this.eraseHighlights=function(){for(var a=h().getElementsByClassName("highlighter");0<a.length;)h().removeChild(a[0])};var F="http://www.w3.org/2000/svg",D=" \u5c07 \u58eb \u8c61 \u99ac \u8eca \u7832 \u5352  \u5e25 \u4ed5 \u76f8 \u508c \u4fe5 \u70ae \u5175".split(" "),A=50,v=0,x=!1;G(!1)};function Board(p){function h(){for(var g=0;10>g;++g)for(var e=0;9>e;++e)q.pieceAt(g,e)!=PIECE_NONE&&a.drawPieceWithCover(g,e,q.pieceAt(g,e));w=q.numMoves()}function e(a){a=Math.max(0,a);a=Math.min(q.numMoves(),a);if(a!=w){var e=q.moveHistory();if(a>w)for(var h=w;h<a;++h)u(e[h]);else for(h=w-1;h>=a;--h)0<h?n(e[h],e[h-1]):n(e[h],null);w=a}}function t(a){return a==PIECE_NONE?!1:"r"==B?isRedPiece(a):"b"==B?!isRedPiece(a):!1}function u(g){a.erasePiece(g.i1,g.j1);g.capture&&a.erasePiece(g.i2,g.j2);a.drawPieceWithCover(g.i2,
g.j2,g.piece);a.eraseHighlights();a.highlightSquare(g.i1,g.j1);a.highlightSquare(g.i2,g.j2);z=null}function n(g,e){a.drawPieceWithCover(g.i1,g.j1,g.piece);a.erasePiece(g.i2,g.j2);g.capture&&a.drawPieceWithCover(g.i2,g.j2,g.capture);a.eraseHighlights();e&&(a.highlightSquare(e.i1,e.j1),a.highlightSquare(e.i2,e.j2));z=null}this.setState=function(g,p,t){g!=B&&(B=g,a.reset("b"==g),q.reset(),h(),z=null);E=p;g=q.moveHistory();t=q.setMoves(t);p=w;w==g.length&&(p=q.numMoves());for(p=Math.min(p,q.numMoves());w>
t;--w){var u=w-1;0<u?n(g[u],g[u-1]):n(g[u],null)}e(p)};this.showMove=e;this.isRedNext=function(){return q.isRedNext()};this.numMoves=function(){return q.numMoves()};this.numMovesShown=function(){return w};var q=new Chess,a=new BoardUI(function(g,e){if(!E){var h=q.isRedNext();if(("r"==B&&h||"b"==B&&!h)&&w==q.numMoves())if(z)if(q.checkMove(z[0],z[1],g,e)){var h=z[0],n=z[1];u(q.move(h,n,g,e));++w;p(h,n,g,e)}else t(q.pieceAt(g,e))&&(a.eraseHighlights(),z=[g,e],a.highlightSquare(g,e));else t(q.pieceAt(g,
e))&&(a.eraseHighlights(),z=[g,e],a.highlightSquare(g,e))}}),B="r",E=!0,z=null,w=0;a.drawColorIndicator(document.getElementById("redIndicator"),!0);a.drawColorIndicator(document.getElementById("blackIndicator"),!1);h()};function Stopwatch(p){function h(){return document.getElementById(p)}function e(){if(n){var a=document.getElementById(p+"Hand"),e=.8*u,h=q/t*2*Math.PI;a.setAttribute("x2",e*Math.sin(h));a.setAttribute("y2",-e*Math.cos(h));++q;q%=t}}this.start=function(){n||(n=!0,q=0,e(),h().style.visibility="visible")};this.stop=function(){n=!1;h().style.visibility="hidden"};this.tick=e;this.frequency=function(){return t};var t=60,u=20,n=!1,q=0;(function(){var a=document.createElementNS("http://www.w3.org/2000/svg",
"circle");a.setAttribute("cx",0);a.setAttribute("cy",0);a.setAttribute("r",u);a.style.stroke="black";a.style.strokeWidth=2;a.style.fillOpacity=0;h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",0);a.setAttribute("y1",-u);a.setAttribute("x2",0);a.setAttribute("y2",-u-6);a.style.strokeWidth=4;a.style.stroke="black";h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("x",-3);a.setAttribute("y",-u-6-4);
a.setAttribute("width",6);a.setAttribute("height",4);a.style.strokeWidth=.5;a.style.stroke="black";a.style.fillOpacity=0;h().appendChild(a);a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",0);a.setAttribute("cy",-u-6-2);a.setAttribute("r",6);a.style.stroke="black";a.style.strokeWidth=1;a.style.fillOpacity=0;h().appendChild(a);for(a=-3;3>=a;a+=1){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",a);e.setAttribute("y1",-u-6-
4);e.setAttribute("x2",a);e.setAttribute("y2",-u-6);e.style.strokeWidth=.2;e.style.stroke="black";h().appendChild(e)}for(a=0;12>a;++a){var e=document.createElementNS("http://www.w3.org/2000/svg","line"),n=a/12*2*Math.PI,q=u,t=.7*u;e.setAttribute("x1",q*Math.sin(n));e.setAttribute("y1",-q*Math.cos(n));e.setAttribute("x2",t*Math.sin(n));e.setAttribute("y2",-t*Math.cos(n));e.style.strokeWidth=1;e.style.stroke="black";h().appendChild(e)}for(a=0;60>a;++a)e=document.createElementNS("http://www.w3.org/2000/svg",
"line"),n=a/60*2*Math.PI,q=u,t=.85*u,e.setAttribute("x1",q*Math.sin(n)),e.setAttribute("y1",-q*Math.cos(n)),e.setAttribute("x2",t*Math.sin(n)),e.setAttribute("y2",-t*Math.cos(n)),e.style.strokeWidth=.5,e.style.stroke="black",h().appendChild(e);a=document.createElementNS("http://www.w3.org/2000/svg","line");a.id=p+"Hand";a.setAttribute("x1",0);a.setAttribute("y1",0);a.setAttribute("x2",0);a.setAttribute("y2",.8*-u);a.style.strokeWidth=1.5;a.style.stroke="black";h().appendChild(a);h().style.visibility=
"hidden"})()};function Game(p,h,e){function t(a,l,e,f,g,h,m){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var a=b.indexOf(e);if(-1!=a){b.splice(a,1);for(var c=d+1;c<=C;++c)if(a=b.indexOf(c),-1==a)d=c;else break;requestResolved=!0}else requestResolved=!1;200<=n.status&&299>=n.status?requestResolved||C==e?h(n.responseText):console.log("Dropped response from an old request."):m&&m(n.responseText)}};n.open(a,l,!0);f&&n.setRequestHeader("Content-type",f);g?n.send(g):n.send()}function u(a,
l,e,d){++C;b.push(C);t("POST",a,C,"application/x-www-form-urlencoded; charset=UTF-8",l,e,d)}function n(a){if("fail"==a)alert("Operation failed");else try{var b=JSON.parse(a);b.gameinfo&&("success"!==b.status&&console.log("last update failed"),b=b.gameinfo);e=b;v()}catch(d){console.log("Unrecognized server response: "+a)}}function q(a){a=a.split("/");for(var b=[],e=1;e<a.length;++e){var d=a[e];if("R"==d||"B"==d)break;b.push([parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10)])}return b}
function a(a,b,d,f){var g=e;a=[a,b,d,f];g.moves+="/"+(""+a[0]+a[1]+a[2]+a[3]);F();u("/gameinfo","uid="+h+"&sid="+E("sid")+"&gid="+p+"&moves="+e.moves,n,B);A()}function B(a){console.log("Retrieve game info failed")}function E(a){a+="=";for(var b=document.cookie.split(";"),e=0;e<b.length;++e){for(var d=b[e];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}function z(a){removeAllChildren("invite-ai-container");var b=createLink("invite-ai-link",null,
"#",function(){w("invite-ai-link");u("/invite_ai","uid="+h+"&sid="+E("sid")+"&gid="+p,n,B);return!1},"invite Blur");document.getElementById("invite-ai-container").appendChild(b);a||w("invite-ai-link")}function w(a){var b=document.getElementById(a);a=b.parentElement;var e=b.innerText,d=b.classList;a.removeChild(b);b=document.createElement("span");b.classList=d;b.classList.add("disabled-link");b.appendChild(document.createTextNode(e));a.appendChild(b)}function g(a){w(a+"-sit-link");u("/gameinfo","uid="+
h+"&sid="+E("sid")+"&gid="+p+"&sit="+a,n,B)}function y(a){var b=document.createElement("sup");b.className="hint-you";a?b.appendChild(document.createTextNode(" ")):b.appendChild(document.createTextNode("you"));return b}function G(){removeAllChildren("red-player");removeAllChildren("black-player");if(void 0!==e.red&&null!==e.red){var a=document.getElementById("red-player"),b=document.createElement("span");b.appendChild(document.createTextNode(e.red.name));a.appendChild(b);a.appendChild(y(e.red.id!=
h))}else b=createLink("red-sit-link","sit-link","#",function(){g("red");return!1},"sit here"),document.getElementById("red-player").appendChild(b);void 0!==e.black&&null!==e.black?(a=document.getElementById("black-player"),b=document.createElement("span"),b.appendChild(document.createTextNode(e.black.name)),a.appendChild(b),a.appendChild(y(e.black.id!=h))):(b=createLink("black-sit-link","sit-link","#",function(){g("black");return!1},"sit here"),document.getElementById("black-player").appendChild(b))}
function F(){var a=document.getElementById("waitingStatus"),b=document.getElementById("playingStatus"),d=document.getElementById("redWonStatus"),g=document.getElementById("blackWonStatus");a.style.display="none";b.style.display="none";d.style.display="none";g.style.display="none";e.moves.endsWith("R")?(d.style.display="inline-block",x.stop(),m.stop()):e.moves.endsWith("B")?(g.style.display="inline-block",x.stop(),m.stop()):e.red&&e.black?(b.style.display="inline-block",f.isRedNext()?(x.start(),m.stop()):
(m.start(),x.stop())):a.style.display="inline-block"}function D(a,b){var d=document.createElement("td");d.appendChild(b);a.appendChild(d)}function A(){removeAllChildren("move-history");var a=document.getElementById("move-history"),b=document.createElement("table");b.id="moveHistoryControls";var d=document.createElement("tr");b.appendChild(d);0<f.numMovesShown()?(D(d,createLink("move-history-first",void 0,"#",function(){f.showMove(0);A();return!1},"first")),D(d,createLink("move-history-prev",void 0,
"#",function(){f.showMove(f.numMovesShown()-1);A();return!1},"prev"))):(D(d,document.createTextNode("first")),D(d,document.createTextNode("prev")));D(d,document.createTextNode(""+f.numMovesShown()+" / "+f.numMoves()));f.numMovesShown()<f.numMoves()?(D(d,createLink("move-history-next",void 0,"#",function(){f.showMove(f.numMovesShown()+1);A();return!1},"next")),D(d,createLink("move-history-last",void 0,"#",function(){f.showMove(f.numMoves());A();return!1},"last"))):(D(d,document.createTextNode("next")),
D(d,document.createTextNode("last")));a.appendChild(b);document.getElementById("forkGame");removeAllChildren("forkGame");forkGame.appendChild(createLink("move-history-fork-link",void 0,"/fork/"+p+"/"+f.numMovesShown().toString(),void 0,"fork at move "+f.numMovesShown()))}function v(){G();var a="r";e.black&&e.black.id==h&&(a="b");var b=e.black&&e.black.id==h||e.red&&e.red.id==h;f.setState(a,!(e.red&&e.black&&!e.moves.endsWith("R")&&!e.moves.endsWith("B"))||!b,q(e.moves));F();A();z(b&&(!e.black||!e.red))}
var x,m,f,d=0,C=0,b=[];(function(){x=new Stopwatch("redStopwatch");m=new Stopwatch("blackStopwatch");window.setInterval(function(){x.tick();m.tick()},6E4/x.frequency());f=new Board(a);v();window.setInterval(function(){t("GET","/gameinfo?gid="+p,d,void 0,void 0,n,B)},1E3)})()}
function toggleMenu(){var p=document.getElementById("menu-text"),h=document.getElementById("menu-content");"grid"==h.style.display?(h.style.display="none",p.innerHTML='menu <span class="menu-toggle">[+]</span>'):(h.style.display="grid",p.innerHTML='menu <span class="menu-toggle">[-]</span>')}document.onreadystatechange=function(){"interactive"==document.readyState&&new Game(currentGameId,myUid,gameInfo)};
